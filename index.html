<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Prioritization Tool</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900 font-sans">

    
    <div class="container mx-auto p-6">
        <!-- Search Input Field -->
        <div class="flex justify-between mb-4">
            <input type="text" id="task-search" placeholder="Search tasks..." onkeyup="filterTasks()"
                   class="w-full p-2 border border-gray-300 rounded-lg shadow-sm">
        </div>

        <h1 class="text-3xl font-semibold text-center mb-6">Task Prioritization Tool</h1>

        <!-- Toggle View Buttons -->
        <div class="flex justify-center mb-4">
            <button onclick="toggleView('list')" class="bg-blue-500 text-white p-2 rounded-lg mr-4 hover:bg-blue-600 transition duration-200">List View</button>
            <button onclick="toggleView('grid')" class="bg-blue-500 text-white p-2 rounded-lg hover:bg-blue-600 transition duration-200">Grid View</button>
        </div>

        <!-- Task Form -->
        <form id="task-form" class="space-y-4">
            <div class="space-y-2">
                <input type="text" id="task-name" placeholder="Task Name" required
                       class="w-full p-3 border border-gray-300 rounded-lg shadow-sm">
            </div>
            <div class="space-y-2">
                <label for="urgency" class="block text-sm font-medium">Urgency:</label>
                <select id="urgency" required
                        class="w-full p-3 border border-gray-300 rounded-lg shadow-sm">
                    <option value="" disabled selected>Select Urgency</option>
                    <option value="1">1 - Low</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 - High</option>
                </select>
            </div>
            <div class="space-y-2">
                <label for="importance" class="block text-sm font-medium">Importance:</label>
                <select id="importance" required
                        class="w-full p-3 border border-gray-300 rounded-lg shadow-sm">
                    <option value="" disabled selected>Select Importance</option>
                    <option value="1">1 - Low</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 - High</option>
                </select>
            </div>
            <div class="space-y-2">
                <label for="effort" class="block text-sm font-medium">Effort (hours):</label>
                <input type="number" id="effort" min="0.5" max="24" step="0.5" required
                       class="w-full p-3 border border-gray-300 rounded-lg shadow-sm">
            </div>
            <button type="submit" id="submit-button"
                    class="w-full bg-blue-500 text-white p-3 rounded-lg shadow-md hover:bg-blue-600 transition duration-200">
                Add Task
            </button>
        </form>

        <!-- Task Lists -->
        <div id="task-list" class="mt-6 p-6 bg-white shadow-lg rounded-lg">
            <h2 class="text-3xl font-semibold text-gray-900 mb-4">Pending Tasks</h2>
            <div id="task-list-content" class="mt-4 space-y-4"></div>
            <!-- Bulk delete button for Pending tasks -->
            <button onclick="bulkDeleteTasks('pending')" class="w-full sm:w-auto bg-red-600 text-white py-3 px-4 rounded-lg shadow-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition duration-300 mt-6 text-lg">
                Bulk Delete Selected Tasks
            </button>
        </div>
        
        <div id="completed-task-section" class="mt-8 p-6 bg-white shadow-lg rounded-lg">
            <h2 class="text-3xl font-semibold text-gray-900 mb-4">Completed Tasks</h2>
            <div id="completed-task-list" class="mt-4 space-y-4"></div>
            <!-- Bulk delete button for Completed tasks -->
            <button onclick="bulkDeleteTasks('completed')" class="w-full sm:w-auto bg-red-600 text-white py-3 px-4 rounded-lg shadow-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition duration-300 mt-6 text-sm">
                Bulk Delete Selected Completed Tasks
            </button>
        </div>
        
    </div>

    <script>
        let tasks = [];
        let completedTasks = [];
        let currentView = 'list'; // Default view is list

        function saveTasksToCookies() {
            document.cookie = "tasks=" + JSON.stringify(tasks) + "; path=/; max-age=" + (60 * 60 * 24 * 7);
        }

        function saveCompletedTasksToCookies() {
            document.cookie = "completedTasks=" + JSON.stringify(completedTasks) + "; path=/; max-age=" + (60 * 60 * 24 * 7);
        }

        function loadTasksFromCookies() {
            const cookies = document.cookie.split("; ");
            for (let cookie of cookies) {
                const [name, value] = cookie.split("=");
                if (name === "tasks") {
                    try {
                        tasks = JSON.parse(decodeURIComponent(value)) || [];
                    } catch (e) {
                        tasks = [];
                    }
                } else if (name === "completedTasks") {
                    try {
                        completedTasks = JSON.parse(decodeURIComponent(value)) || [];
                    } catch (e) {
                        completedTasks = [];
                    }
                }
            }
        }

        function deleteTask(index, type) {
            if (type === 'pending') {
                tasks.splice(index, 1);
                saveTasksToCookies();
                updateTaskList();
            } else if (type === 'completed') {
                completedTasks.splice(index, 1);
                saveCompletedTasksToCookies();
                updateCompletedTaskList();
            }
        }

        function completeTask(index) {
            const completedTask = tasks.splice(index, 1)[0];
            if (completedTask) {
                completedTasks.push(completedTask);
                saveTasksToCookies();
                saveCompletedTasksToCookies();
                updateTaskList();
                updateCompletedTaskList();
            }
        }

        function bulkDeleteTasks(type) {
            let selectedTasks = [];
            if (type === 'pending') {
                selectedTasks = Array.from(document.querySelectorAll('.task-checkbox:checked')).map(checkbox => checkbox.dataset.index);
                tasks = tasks.filter((task, index) => !selectedTasks.includes(index.toString()));
                saveTasksToCookies();
                updateTaskList();
            } else if (type === 'completed') {
                selectedTasks = Array.from(document.querySelectorAll('.completed-task-checkbox:checked')).map(checkbox => checkbox.dataset.index);
                completedTasks = completedTasks.filter((task, index) => !selectedTasks.includes(index.toString()));
                saveCompletedTasksToCookies();
                updateCompletedTaskList();
            }
        }

        function updateTaskList(filteredTasks = tasks) {
            filteredTasks.forEach(task => {
                task.priorityScore = 0.5 * task.importance + 0.4 * task.urgency - 0.1 * task.effort;
            });
            filteredTasks.sort((a, b) => b.priorityScore - a.priorityScore);

            const taskListContent = document.getElementById('task-list-content');
            taskListContent.innerHTML = '';

            filteredTasks.forEach((task, index) => {
                const taskDiv = document.createElement('div');
                taskDiv.classList.add('bg-white', 'p-4', 'rounded-lg', 'shadow-md', 'flex', 'justify-between', 'items-center', 'transition-all', 'hover:shadow-xl', 'hover:border-blue-500', 'border', 'border-gray-200', 'mb-4');
                taskDiv.innerHTML = `
                    <div class="flex items-center space-x-4">
                        <input type="checkbox" class="task-checkbox" data-index="${index}" />
                        <strong class="text-xl ml-2 font-semibold text-gray-800">${task.name}</strong><br>
                        <div class="text-sm text-gray-600">
                            Urgency: ${task.urgency}, Importance: ${task.importance}, Effort: ${task.effort} hrs<br>
                            Priority Score: <span class="font-bold">${task.priorityScore.toFixed(2)}</span>
                        </div>
                    </div>
                    <button onclick="completeTask(${index})" class="text-white bg-green-600 hover:bg-green-700 rounded-lg p-2">
                        Mark as Complete
                    </button>
                    <button onclick="deleteTask(${index}, 'pending')" class="text-white bg-red-600 hover:bg-red-700 rounded-lg p-2 ml-2">
                        Delete
                    </button>
                `;
                taskListContent.appendChild(taskDiv);
            });
        }

        function updateCompletedTaskList() {
            const completedTaskList = document.getElementById('completed-task-list');
            completedTaskList.innerHTML = '';
            completedTasks.forEach((task, index) => {
                const taskDiv = document.createElement('div');
                taskDiv.classList.add('bg-white', 'p-4', 'rounded-lg', 'shadow-md', 'flex', 'justify-between', 'items-center', 'transition-all', 'hover:shadow-xl', 'hover:border-blue-500', 'border', 'border-gray-200', 'mb-4');
                taskDiv.innerHTML = `
                    <div class="flex items-center space-x-4">
                        <input type="checkbox" class="completed-task-checkbox" data-index="${index}" />
                        <strong class="text-xl ml-2 font-semibold text-gray-800">${task.name}</strong><br>
                        <div class="text-sm text-gray-600">
                            Urgency: ${task.urgency}, Importance: ${task.importance}, Effort: ${task.effort} hrs<br>
                        </div>
                    </div>
                    <button onclick="deleteTask(${index}, 'completed')" class="text-white bg-red-600 hover:bg-red-700 rounded-lg p-2">
                        Delete
                    </button>
                `;
                completedTaskList.appendChild(taskDiv);
            });
        }

        function addTaskToList(event) {
            event.preventDefault();

            const taskName = document.getElementById('task-name').value;
            const urgency = parseInt(document.getElementById('urgency').value);
            const importance = parseInt(document.getElementById('importance').value);
            const effort = parseFloat(document.getElementById('effort').value);

            if (!taskName || !urgency || !importance || !effort) {
                alert("All fields are required.");
                return;
            }

            const newTask = { name: taskName, urgency, importance, effort };
            tasks.push(newTask);

            saveTasksToCookies();
            updateTaskList();

            document.getElementById('task-form').reset();
        }

        function filterTasks() {
            const query = document.getElementById('task-search').value.toLowerCase();
            const filteredTasks = tasks.filter(task => task.name.toLowerCase().includes(query));
            updateTaskList(filteredTasks);
        }

        function toggleView(view) {
            if (view === 'grid') {
                document.getElementById('task-list').classList.remove('space-y-4');
                document.getElementById('task-list').classList.add('grid', 'grid-cols-1', 'md:grid-cols-2', 'lg:grid-cols-3', 'gap-6');
            } else {
                document.getElementById('task-list').classList.remove('grid', 'grid-cols-1', 'md:grid-cols-2', 'lg:grid-cols-3', 'gap-6');
                document.getElementById('task-list').classList.add('space-y-4');
            }
            currentView = view;
        }

        document.getElementById('task-form').addEventListener('submit', addTaskToList);

        // Initial load
        loadTasksFromCookies();
        updateTaskList();
        updateCompletedTaskList();
    </script>

</body>
</html>
